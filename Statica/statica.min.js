"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t}function data(e){return function(){function t(r){if(_classCallCheck(this,t),!e.vals.includes(r))throw new Error("Value passed in not in valid values array: ".concat(JSON.stringify(e.vals)));this["[[PrimitiveValue]]"]=r,e.type&&(this.datatype=e.type)}return _createClass(t,[{key:"valueOf",value:function(){return this["[[PrimitiveValue]]"]}},{key:"value",get:function(){return this["[[PrimitiveValue]]"]},set:function(t){if(!e.vals.includes(t))throw new Error("Value passed in not in valid values array: ".concat(JSON.stringify(e.vals)));this["[[PrimitiveValue]]"]=t}}]),t}()}Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,r=this.length;t<r;t++)if(_instanceof(this[t],Array)&&_instanceof(e[t],Array)){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var Interface=function e(t,r){_classCallCheck(this,e),this.inter=t,this.name=r};Object.prototype.implements=function e(t){if(!_instanceof(t,Interface))throw new Error("You cannot implement a non-interface.");this.interfaces?this.interfaces.push(t.name):this.interfaces=[t.name];for(var r=t.inter,n=Object.keys(this),i=Object.entries(r),a=0;a<i.length;a++){var o=i[a];if(n.includes(o[0])){if(o[1].type&&o[1].type!==_typeof(this[o[0]])){if(!o[1].value)throw new Error("Expected property ".concat(o[0]," to be of type ").concat(o[1].type,"."));this[o[0]]=o[1].value}}else{if(!o[1].value)throw new Error("Expected property ".concat(o[0],", but not found."));this[o[0]]=o[1].value}}for(var c=arguments.length,s=new Array(c>1?c-1:0),f=1;f<c;f++)s[f-1]=arguments[f];return s.length>0&&e.call.apply(e,[this].concat(s)),this},Function.prototype.params=function(){this.fheader||(this.fheader={});for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.fheader.params=t,this},Function.prototype.returns=function(e){return this.fheader||(this.fheader={}),this.fheader.returns=e,this};var T={ready:function(e){return e||{}},generic:function(e){return e.constructor&&"object"===_typeof(e)?"c:".concat(e.constructor.name):e.interfaces?"i:".concat(e.interfaces[0]):e.datatype?"d:".concat(e.datatype):Object.prototype.toString.call(e).replace(/\[object\s(.+)\]/,"$1")},typecheck:function(e,t){if("string"==typeof t){if("Any"===t)return!0;var r,n=!1;"!"===t[0]&&(n=!0,t=t.replace("!","")),t.includes("&")?(t=t.split("&"),r="AND"):(t=t.split("|"),r="OR");var i=!1,a=0,o=!0,c=!1,s=void 0;try{for(var f,l=t[Symbol.iterator]();!(o=(f=l.next()).done);o=!0){var u=f.value;if(!0===i&&"OR"===r)break;if(!1===i&&"AND"===r&&0!==a)break;if("AND"===r&&(i=!1),a++,/[cide]\:(.+)/.test(u)){if(/e\:(.+)/.test(u))if(e)i=e.__proto__.__proto__.constructor.name===u.replace("e:","").replace("?","");else{var p=/(.+)\?/.test(u);(void 0===e||null===e&&p)&&(i=!0)}else if(/c\:(.+)/.test(u))if(e)i=e.constructor.name===u.replace("c:","").replace("?","");else{var y=/(.+)\?/.test(u);(void 0===e||null===e&&y)&&(i=!0)}else if(/i\:(.+)/.test(u))if(T.ready(e).interfaces)i=e.interfaces.includes(u.replace("i:","").replace("?",""));else{var h=/(.+)\?/.test(u);(void 0===e||null===e&&h)&&(i=!0)}else if(/d\:(.+)/.test(u))if(T.ready(e).datatype)i=e.datatype===u.replace("d:","").replace("?","");else{var d=/(.+)\?/.test(u);(void 0===e||null===e&&d)&&(i=!0)}}else{var v=Object.prototype.toString.call(e).replace(/\[object\s(.+)\]/,"$1");i=v===u.replace(/[\@\#\?]/g,"");var _=/(.+)\?/.test(u);if(!e&&_&&(i=!0),"Number"===v)/(.+)\#/.test(u)&&e%1!=0&&(i=!1);if("String"===v)/(.+)@/.test(u)&&1!==e.length&&(i=!1)}}}catch(e){c=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(c)throw s}}return n&&(i=!i),i}if("object"===_typeof(t)){var b=!1;if(!T.ready(e).fheader)throw new Error("Function header not specified.");return e.fheader.params.equals(t.params)&&e.fheader.returns===t.returns&&(b=!0),b}}};T.typewrapper=function(){return function e(t,r){_classCallCheck(this,e),this._value=t,this._type=r,Object.defineProperty(this,"_",{get:function(){return this._value},set:function(e){if(!T.typecheck(e,this._type))throw new Error("Value ".concat(JSON.stringify(e)," is not of type ").concat(this._type,"."));this._value=e}})}}(),T.type=function(e,t){if(T.typecheck(e,t))return new T.typewrapper(e,t);throw new Error("Value ".concat(JSON.stringify(e)," is not of type ").concat(t,"."))},T.typeify=function(e,t){for(var r=0;r<e.length;r++)t[r]?e[r]=T.type(e[r],t[r]):e[r]=T.type(e[r],T.generic(e[r]))},T.returns=function(e,t,r){return t=t||T.generic(e),T.type(e,t)._};
